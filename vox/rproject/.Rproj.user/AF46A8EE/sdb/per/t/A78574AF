{
    "contents" : "head (vox.headlines)\nlibrary (stringr)\n\nvoxheadlines9july$datetime = gsub('([\\n][ ]*[-A-Za-z\\u00C0-\\u017F\". ]*[\\n])(.*)','\\\\2', \n  voxheadlines9july$adate)\nvoxheadlines9july$datetimenew = gsub('([\\n][ ]*[-A-Za-z\\u00C0-\\u017F\"-\". ]*, updated[\\n])(.*)','\\\\2', \n  voxheadlines9july$datetime)\nvoxheadlines9july$datetimenew = gsub('([\\n][ ]*[-A-Za-z\\u00C0-\\u017F\"-\"., ]*\n  [\", and \"][-A-Za-z\\u00C0-\\u017F\"-\". ]*[\\n])(.*)','\\\\2', voxheadlines9july$datetimenew)\nvoxheadlines9july$datetimenewnew = gsub('([\\n][ ]*[-A-Za-z\\u00C0-\\u017F\"-\"., ]*\n  [\", and\"]*[-A-Za-z\\u00C0-\\u017F\"-\". ]*[,][ updated]*[\\n])(.*)','\\\\2', voxheadlines9july$datetimenew)\nView (voxheadlines9july)\n\nvoxheadlines9july$datetimefinal = voxheadlines9july$datetimenewnew\nvoxheadlines9july$datetimenew = voxheadlines9july$datetimenewnew = NULL\n\nhead (voxheadlines9july)\nvoxheadlines9july$datetimefinal\nvoxheadlines9july$datetimeclean = \n  gsub('[ ]*([A-Za-z0-9:., ]* ET)(.*)(.*)','\\\\1', voxheadlines9july$datetimefinal)\nvoxheadlines9july$monthname = \n  gsub('^([A-Za-z]*) ([0-9]*), ([0-9][0-9][0-9][0-9]), ([0-9 :.amp]*) ET$',\n        '\\\\1', voxheadlines9july$datetimeclean)\nvoxheadlines9july$date = \n  gsub('^([A-Za-z]*) ([0-9]*), ([0-9][0-9][0-9][0-9]), ([0-9 :.amp]*) ET$',\n       '\\\\2', voxheadlines9july$datetimeclean)\nvoxheadlines9july$year = \n  gsub('^([A-Za-z]*) ([0-9]*), ([0-9][0-9][0-9][0-9]), ([0-9 :.amp]*) ET$',\n       '\\\\3', voxheadlines9july$datetimeclean)\nvoxheadlines9july$time = \n  gsub('^([A-Za-z]*) ([0-9]*), ([0-9][0-9][0-9][0-9]), ([0-9 :.amp]*) ET$',\n       '\\\\4', voxheadlines9july$datetimeclean)\n\nhead(voxheadlines9july)\nnames (months) = c('month','monthnumber')\ndataset = merge(x = voxheadlines9july, y = months, by.x = \"monthname\", by.y = \"month\")\nhead(dataset)\nvoxheadlines9july$monthname\nmonths$monthname\n\nnrow(voxheadlines9july[voxheadlines9july$datetime==\"\",])\nproblemset = voxheadlines9july[voxheadlines9july$datetime==\"\",]\nView (problemset)\n\n#looks like the problem set is just empty spaces. all good.\n\nhead(dataset)\nlibrary (lubridate)\nlibrary (stringr)\ndataset$year = str_trim(dataset$year)\ndataset$monthnumber = str_trim(dataset$monthnumber)\ndataset$datecombined = paste (dataset$year,'-',dataset$monthnumber,'-',dataset$date,sep=\"\")\nhead (dataset$datecombined)\nstr_length (dataset$datecombined[1])\ndatasetcopy = dataset\n\ncleanmonth = function (x){\n  if (str_length (x==1)){\n    x = paste(0,x,sep=\"\")\n  }\n}\n\nsent_token_annotator <- Maxent_Sent_Token_Annotator()\nword_token_annotator <- Maxent_Word_Token_Annotator()\npos_tag_annotator <- Maxent_POS_Tag_Annotator()\n\nentity_annotator <- Maxent_Entity_Annotator()\nentity_annotator\n\n(language = \"en\", kind = \"person\", probs = FALSE, model = 'en-ner-person.bin')\n\na3 <- annotate(dataset$headline,\n               list(sent_token_annotator,\n                    word_token_annotator,\n                    pos_tag_annotator))\n\na2 <- annotate(dataset$headline, list(sent_token_annotator, word_token_annotator))\n\ntypes <- entity_annotator(dataset$headline, a2)\nty <- data.frame (types)\nView(ty)\n\n# new code for nlp\nlibrary(NLP)\nlibrary(openNLP)\nlibrary(magrittr)\n\nword_ann <- Maxent_Word_Token_Annotator()\nsent_ann <- Maxent_Sent_Token_Annotator()\nbio_annotations <- annotate(dataset$headline, list(sent_ann, word_ann))\nbio_annotations\n\nperson_ann <- Maxent_Entity_Annotator(kind = \"person\")\n\npipeline <- list(sent_ann,\n                 word_ann,\n                 person_ann\n                 )\nbio_annotations <- annotate(dataset$headline, pipeline)\nbio_doc <- AnnotatedPlainTextDocument(dataset$headline, bio_annotations)\nbio_doc\nhead (bio_doc)\n\n# back to cleaning time stamps\n\nlibrary (lubridate)\ndatasetcopy$monthnumber\ndataset = datasetcopy\n\n\nexportJson <- toJSON(dataset)\nwrite(exportJson, \"dataset.json\")\n\n",
    "created" : 1434285635604.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "107773107",
    "id" : "A78574AF",
    "lastKnownWriteTime" : 1437106163,
    "path" : "~/poynter/headline-scrapers/vox/rproject/june14.R",
    "project_path" : "june14.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}